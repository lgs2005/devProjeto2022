{% extends "layout.html" %}

{% block conteudo %}

<div class="d-flex">
    <div class="container">
        <div class="row justify-content-center mt-5">
            <h1 class="display-3 mb-4 lh-1 fw-semibold text-center font-roboto">Abra sua conta <br> hoje.</h1>

            <div class="col-md-4">

				<div class="container">
					<div class="row p-2 justify-content-center">
                        <div class="col ps-0 pe-0">
                            <div class="d-grid">
                                <a href="/login" class="btn-auth-page inactive">Login</a>
                            </div>
                        </div>
                        <div class="col ps-0 pe-0">
                            <div class="d-grid">
                                <a href="/registrar" class="btn-auth-page active">Registrar</a>
                            </div>
                        </div>
                    </div>
				</div>


				<div class="container flash-messages pt-3">
					{% with messages = get_flashed_messages(with_categories=true) %}
						{% if messages %}
							{% for category, message in messages %}
							<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
								{{ message }}
								<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
							</div>
							{% endfor %}
						{% endif %}
					{% endwith %}
				</div>

                <form method="GET">
					<div class="mb-2">
						<label for="input-nome" class="form-label">Nome</label>
						<input type="text" class="form-control shadow-sm" id="input-nome" name="nome" placeholder="Seu nome de usuário">
					</div>
				
    
                    <div class="mb-2">
                        <label for="input-email" class="form-label">Email</label>
        				<input type="email" class="form-control shadow-sm" id="input-email" name="email" autocomplete="email" placeholder="Seu email">
                    </div>
    
                    <div class="mb-2">
                        <label for="input-senha" class="form-label">Senha</label>
        				<input type="password" class="form-control shadow-sm" id="input-senha" name="senha" autocomplete="new-password" placeholder="Sua senha">
                    </div>
    
                    <div class="d-grid col-4 mx-auto mt-4">
                        <button id="botao-registro" type="submit" class="btn btn-outline-primary rounded-pill shadow-sm">Registrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block script %}

<script>
	$(document).ready(function() {
		function validarDados() {
			let campos = [
				$("#input-nome"),
				$("#input-senha"),
				$("$input-email")
			];

			let valores = campos.map(c => c.val())
			let naoPermitido = [undefined, null, '']

			for (v of valores) {
				if (naoPermitido.includes(v)){
					// TODO: mostrar um erro para o usuário
					return false;
				}
			}

			return true;
		}

		$('#botao-registro').submit(validarDados);
	})
</script>

{% endblock %}